package game;

import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

import edu.monash.fit2099.engine.*;

/**
 * The main class for the Jurassic World game.
 *
 */
public class Application {
	public static void main(String[] args) {
		boolean running = true;
		//Made an infinite loop so the application only close when the user picks option 3
		while (running == true) {

			World world = new World(new Display());

			FancyGroundFactory groundFactory = new FancyGroundFactory(new Dirt(), new Wall(), new Floor(), new Tree(), new Lake(), new Rain());

			List<String> map = Arrays.asList(
					"!...............................................................................",
					"................................................................................",
					".....#######.............................................~~~~~..................",
					".....#_____#...........................................~~~~~....................",
					".....#_____#.............................................~~~~~..................",
					".....###.###....................................................................",
					"................................................................................",
					"......................................+++.......................................",
					".......................................++++.....................................",
					"...................................+++++........................................",
					".....................................++++++.....................................",
					"......................................+++.......................................",
					".....................................+++........................................",
					"................................................................................",
					"............+++.................................................................",
					".............+++++..............................................................",
					"...............++........................................+++++..................",
					".............+++...............~~~~~~~~.............++++++++....................",
					"............+++............~~~~~~~~~~~~~~~~~..........+++.......................",
					".........................~~~~~~~~~~~~~~~~.......................................",
					".........................~~~~~~~~~~~~~~~~................................++.....",
					".............................~~~~~~~~~~~~~~~~...........................++.++...",
					"................................~~~~~~...................................++++...",
					"..........................................................................++....",
					"................................................................................");
			GameMap gameMap = new GameMap(groundFactory, map);
			world.addGameMap(gameMap);

			//The other map
			List<String> map2 = Arrays.asList(
					"!...............................................................................",
					"................................................................................",
					"........+++++++++++......................................~~~~~..................",
					".......++++++++++++++..................................~~~~~....................",
					"............+++++++......................................~~~~~..................",
					".........................................................~~~~~~~~~~.............",
					"............................................................~~~~~~~~~...........",
					"......................................+++.................~~~~~~~~~~~~~.........",
					".......................................++++.................~~~~~~~~............",
					"................................................................................",
					".....................................++++++.....................................",
					"................................................................................",
					".....................................+++........................................",
					"................................................................................",
					"............+++.................................................................",
					"........++++++++................................................................",
					".........................................................+++++..................",
					"...............................~~~~.................++++++++....................",
					"............+++............~~~~~~~....................+++.......................",
					".........++++++++........~~~~~~~~~~~~~~~~.......................................",
					"...........+++++.........~~~~~~~~~~~~~~~~................................++.....",
					".....................................~~~~~~~~...........................++.++...",
					"................................~~~~~~...................................++++...",
					"..........................................................................++....",
					"................................................................................");
			GameMap gameMap2 = new GameMap(groundFactory, map2);
			world.addGameMap(gameMap2);

			Player player = new Player("Player", '@', 100);
			world.addPlayer(player, gameMap.at(9, 4));
			// Place a pair of stegosaurs in the middle of the map
			gameMap.at(30, 12).addActor(new Stegosaur("Stegosaur"));
			gameMap.at(32, 12).addActor(new Stegosaur("Stegosaur"));
			// Place a heard of Brachiosaur
			gameMap.at(25, 9).addActor(new Brachiosaur("Brachiosaur"));
			gameMap.at(27, 9).addActor(new Brachiosaur("Brachiosaur"));
			gameMap.at(25, 7).addActor(new Brachiosaur("Brachiosaur"));
			gameMap.at(27, 7).addActor(new Brachiosaur("Brachiosaur"));


			gameMap.at(9, 3).setGround(new VendingMachine());
			Ecopoints eco = new Ecopoints();

			//Add entrance to other park from the main park
			for (int x = 0; x < 80; x++) {
				Entrance a = new Entrance();
				a.addAction(new MoveActorAction(gameMap2.at(40, 24), "to the other park"));
				gameMap.at(x, 0).addItem(a);
			}
			//add it to the other park as well so you can leave
			for (int x = 0; x < 80; x++) {
				Entrance a = new Entrance();
				a.addAction(new MoveActorAction(gameMap2.at(40, 0), "to the other park"));
				gameMap2.at(x, 24).addItem(a);
			}
			Scanner myObj = new Scanner(System.in);  // Create a Scanner object
			System.out.println("1. Sandbox mode");
			System.out.println("2. Challenge mode");
			System.out.println("3. Quit game");
			System.out.println("Enter number:");

			int input = myObj.nextInt();  // Read user input
			//sandbox mode
			if (input == 1) {
				world.run();
			}
			//challenge mode set the challenge timer using set challenge
			else if (input == 2) {
				System.out.println("Enter how many turns is the limit:");
				int input2 = myObj.nextInt();
				System.out.println("Enter how many eco points is needed for the win:");
				int input3 = myObj.nextInt();
				player.setChallenge(input2, input3);
				world.run();
			}
			//Turns the application off
			else if (input == 3) {
				running = false;
			} else {
				System.out.println("Wrong number");
			}
		}
	}
}
